"use strict";!function(){function e(e){this.targetTypes={}}function t(e){no.targetTypes[e]={},no.targetTypes[e].process=function(e,t){("trigger"!==e.actionType||t.length>0)&&(e.invalid=!0)},no.targetTypes[e].apply=function(t,n,i){i[e]()}}e.prototype.splitParams=function(e){for(var t=[],n="",i=!1,a=!1,o=!1,s=!1,r=!0,c=0;c<e.length;c++){var l=e.charAt(c);if(s){if("'"!==l&&"\\"!==l&&!/\s/.exec(l))return"invalid";n+=l,s=!1,r=!1,a=!1,o=!1}else if(!r&&!a&&i||"'"!==l)if(i&&"'"===l)i=!1,o=!0,t.push(n),n="";else if(!i&&/\s/.exec(l))r||a||o||(t.push(n),n=""),a=!0,o=!1;else if("\\"===l)s=!0,r=!1,a=!1,o=!1;else{if(o)return"invalid";r=!1,a=!1,o=!1,n+=l}else{if(!r&&!a)return"invalid";i=!0,r=!1,a=!1}}return i?"invalid":(o||a||r||t.push(n),t)},e.prototype.processTrigger=function(e,t){var n={};return n.eventType=e.shift(),n.invalid=!1,"timeout"===e[0]?(e.shift(),n.timeout={},n.timeout.time=parseInt(t.shift()),n.timeout.count=parseInt(t.shift()),(isNaN(n.timeout.time)||isNaN(n.timeout.count))&&(n.invalid=!0)):n.timeout=null,n},e.prototype.processAction=function(e,t,n){var i={};i.actionType=e.shift(),i.targetType=e.shift(),i.sourceElement=n,i.isSelf="self"===e[e.length-1],i.isSelf?i.target=n:i.target=t.shift(),i.invalid=!1;var a=this.targetTypes[i.targetType];return null==i.actionType||null==i.targetType||null==a||null==i.target?i.invalid=!0:a.process(i,t),i},e.prototype.processListener=function(e,t,n){var i=this.targetTypes[t.targetType];if(null!=i){var a=function(e){if(t.isSelf)i.apply(e,t,t.target);else{document.querySelectorAll(t.target).forEach(function(n){i.apply(e,t,n)})}},o=null;if(null==e.timeout)o=a;else if(e.timeout.count>0){var s=e.timeout.count;o=function(t){s-- >0&&(a(t),setTimeout(o,e.timeout.time))}}else o=function(t){setInterval(function(){a(t)},e.timeout.time)};"immediately"===e.eventType?setTimeout(function(){a(null)},0):n.addEventListener(e.eventType,o)}},e.prototype.processElement=function(e){var t=this;Object.keys(e.attributes).forEach(function(n){var i=e.attributes[n],a=!1;if(0===i.name.indexOf("on--"))a=!0,console.warn('Deprecation warning: using double dashes "--" are deprecated. Use a single dash "-" instead.');else if(0!==i.name.indexOf("on-"))return;var o=i.name.split(a?"--":"-");o.shift();var s=t.splitParams(i.value);"invalid"===s&&console.warn("invalid no-js parameter "+i.name+'="'+i.value+'"');var r=t.processTrigger(o,s),c=t.processAction(o,s,e);c.invalid||r.invalid?console.warn("invalid no-js attribute "+i.name+'="'+i.value+'"'):t.processListener(r,c,e)})},e.prototype.js=function(e){var t=this;e=e||"html",document.querySelector(e).querySelectorAll("[no-js]").forEach(function(e){t.processElement(e)})},window.no=new e,no.targetTypes.attribute={},no.targetTypes.attribute.process=function(e,t){"add"===e.actionType||"set"===e.actionType?t.length>=2?(e.attributeName=t.shift(),e.attributeValue=t.join(" ")):e.invalid=!0:"remove"===e.actionType&&1===t.length?e.attributeName=t.shift():e.invalid=!0},no.targetTypes.attribute.apply=function(e,t,n){"remove"===t.actionType?n.removeAttribute(t.attributeName):n.setAttribute(t.attributeName,t.attributeValue)},no.targetTypes.class={},no.targetTypes.class.process=function(e,t){"add"===e.actionType||"set"===e.actionType||"remove"===e.actionType||"toggle"===e.actionType||"switch"===e.actionType?e.classNames=t:e.invalid=!0},no.targetTypes.class.apply=function(e,t,n){"set"===t.actionType?n.className=t.classNames.join(" "):"switch"===t.actionType?t.classNames.forEach(function(e){n.classList.remove(e),t.sourceElement.classList.add(e)}):t.classNames.forEach(function(e){n.classList[t.actionType](e)})},no.targetTypes.id={},no.targetTypes.id.process=function(e,t){e.targetType="attribute",t.unshift("id"),no.targetTypes.attribute.process(e,t)},no.targetTypes.dom={},no.targetTypes.dom.process=function(e,t){"remove"!==e.actionType&&0!=t.length&&e.invalid},no.targetTypes.dom.apply=function(e,t,n){"remove"===t.actionType&&n.remove()},no.targetTypes.value={},no.targetTypes.value.process=function(e,t){"set"===e.actionType?e.value=t.join(" "):"reset"===e.actionType&&0===t.length||(e.invalid=!0)},no.targetTypes.value.apply=function(e,t,n){"set"===t.actionType?n.value=t.value:"reset"===t.actionType&&(n.value=null)},no.targetTypes.text={},no.targetTypes.text.process=function(e,t){"set"===e.actionType?e.text=t.join(" "):e.invalid=!0},no.targetTypes.text.apply=function(e,t,n){"set"===t.actionType&&(n.innerText=t.text)},t("click"),t("focus"),t("blur"),t("scrollIntoView"),document.addEventListener("DOMContentLoaded",function(){no.js()})}();